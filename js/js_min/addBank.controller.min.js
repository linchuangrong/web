/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d){function e(){g.addBankForm.bank_id=g.selectBank.id,g.addBankForm.bank_name=g.selectBank.name}function f(){if(0==g.flag.addBankFlag)return!1;var c={id:a.userInfo.id,username:a.userInfo.user_name,bank_id:g.addBankForm.bank_id,bank_name:g.addBankForm.bank_name,bankcard:g.addBankForm.bankcard,rep_bankcard:g.addBankForm.rep_bankcard,real_name:g.addBankForm.real_name,bankzone:g.addBankForm.bankzone,verify_coder:g.addBankForm.verify_coder};a.$broadcast("public.show",["loading_panel"]),g.flag.addBankFlag=!1,b.addBank(c).success(function(b){try{200!=b.ret?window.showAutoDialog(b.msg):2e4==b.data.code?(window.showAutoDialog(b.data.msg),d.go("personal.myBankCard")):window.showAutoDialog(b.data.msg)}catch(a){}finally{a.$broadcast("public.hide",["loading_panel"]),g.flag.addBankFlag=!0}})}a.title="帐户设置-添加银行卡";var g=this;g.addBankForm={bank_id:"",bank_name:"",bankcard:"",rep_bankcard:"",real_name:"",bankzone:"",verify_coder:""},g.flag={addBankFlag:!0},g.bankArray=[{id:111,name:"建设银行"},{id:112,name:"招商银行"},{id:113,name:"工商银行"},{id:114,name:"农业银行"}],g.changeBank=e,g.addBankSubmit=f,c.getBankList().success(function(a){200!=a.ret?widnow.showAutoDialog(a.msg):2e4==a.data.code?(g.bankArray=a.data.list,g.selectBank=g.bankArray[0],g.addBankForm.bank_id=g.bankArray[0].id,g.addBankForm.bank_name=g.bankArray[0].name):window.showAutoDialog(a.data.msg)})}app.import("/app/Tpl/web/js/service/service_min/public.service.min.js","public.service"),app.addController("addBankController",a),a.$inject=["$rootScope","personalService","publicService","$state"]}();