/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d){function e(b){var d={id:a.userInfo.id,username:a.userInfo.user_name};c.getInvoiceProject(d).success(function(a){200!=a.ret?window.showAutoDialog(a.msg):2e4==a.data.code?(h.dealNameArray=a.data.list,b&&b()):window.showAutoDialog(a.data.msg)})}function f(){var b={id:a.userInfo.id,username:a.userInfo.user_name};c.getInvoice(b).success(function(a){200!=a.ret?window.showAutoDialog(a.msg):2e4==a.data.code?h.setInvoiceForm={deal_name:a.data.list.deal_name,invoice_title:a.data.list.invoice_title,consignee:a.data.list.consignee,mobile:a.data.list.mobile,address:a.data.list.address}:window.showAutoDialog(a.data.msg)})}function g(){if(!h.setInvoiceForm.deal_name)return window.showAlertTip("请选择发票项目"),!1;var d={id:a.userInfo.id,username:a.userInfo.user_name,deal_name:h.setInvoiceForm.deal_name,invoice_title:h.setInvoiceForm.invoice_title,consignee:h.setInvoiceForm.consignee,mobile:h.setInvoiceForm.mobile,address:h.setInvoiceForm.address};a.$broadcast("public.show",["loading_panel"]),c.setInvoice(d).success(function(c){try{if(200!=c.ret)return window.showAutoDialog(c.msg),!1;(c.data.code=2e4)?(window.showAutoDialog(c.data.msg),b.reload()):window.showAutoDialog(c.data.msg)}catch(a){}finally{a.$broadcast("public.hide",["loading_panel"])}})}a.title="帐户设置-发票信息设置";var h=this;h.setInvoiceForm={deal_name:"",invoice_title:"",consignee:"",mobile:"",address:""},h.dealNameArray=[],h.getInvoiceProject=e,h.getInvoice=f,h.setInvoiceSubmit=g,function(){h.getInvoiceProject(h.getInvoice)}()}app.addController("invoiceController",a),a.$inject=["$rootScope","$state","personalService","$timeout"]}();