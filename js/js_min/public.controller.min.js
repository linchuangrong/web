/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){A.showSearch=!0}function j(){A.showSearch=!1}function k(a,b){A.searchType=a,A.hideSearchType(),angular.element(b.target).parent().siblings(".button").css("width","auto")}function l(){"活动"==A.searchType?e.go("activityList",{address:"",cate:"",time:"",keyword:A.keyword}):"众筹"==A.searchType?e.go("crowdFundList",{keyword:A.keyword}):"主办方"==A.searchType&&e.go("sponsorList",{keyword:A.keyword})}function m(a){var b=window.event?a.keyCode:a.which;13==b&&A.goToSearch()}function n(){c.$broadcast("public.hide",[])}function o(b){c.$broadcast("public.show",["mask_div","auto_dialog"]),a(b?function(){c.$apply(function(){A.autoDialogTitle=b.toString()})}:function(){c.$apply(function(){A.autoDialogTitle="服务器错误，请联系管理员<br>邮箱：it@eitty.cn"})})}function p(){c.$broadcast("public.hide",["mask_div","auto_dialog"])}function q(a){c.$broadcast("public.show",["mask_div","alert_dialog"]),a?(A.alertDialogTitle=a.alertDialogTitle?a.alertDialogTitle:"确定执行该操作吗？",A.alertDialogConfirm=a.alertDialogConfirm?a.alertDialogConfirm:r,A.alertDialogCancel=a.alertDialogCancel?a.alertDialogCancel:s,A.alertDialogCancelButton=0!=a.alertDialogCancelButton||a.alertDialogCancelButton):(A.delete_dialog_title="确定执行该操作吗？",A.deleteConfirm=r,A.deleteCancel=s,A.alertDialogCancelButton=!0)}function r(){c.$broadcast("public.hide",["mask_div","alert_dialog"])}function s(){c.$broadcast("public.hide",["mask_div","alert_dialog"])}function t(b){a(function(){c.$apply(function(){a.cancel(A.alert_tip_timeout);var c=1800;b?b instanceof Array?(A.alert_text=b[0].toString(),c=b[1]):A.alert_text=b.toString():A.alert_text="操作完成",0==A.alert_tip&&(A.alert_tip=!0),A.alert_tip_timeout=a(function(){A.alert_tip=!1},c)})})}function u(a){angular.element("#"+a).click()}function v(a){f.getSmsEmailCode(a).success(function(a){return 200!=a.ret?(window.showAutoDialog(a.msg),!1):void(2e4==a.data.code?window.showAlertTip(a.data.msg):window.showAutoDialog(a.data.msg))})}function w(){a(function(){var a={username:d.userInfo.user_name};f.exit(a).success(function(a){200!=a.ret?window.showAutoDialog(a.msg):2e4==a.data.code?(window.showAlertTip("退出成功"),$.cookie("yiqi_userInfo",null),d.userInfo={},e.go("index")):widnwo.showAlertTip(a.data.msg)})},1e3)}function x(a){A.selectProvince=a,A.getCityList(A.selectProvince.name,"cityArray",null)}function y(a,b,c){function d(){}function e(a){A[b]=a,c&&c()}g.getCityList(A.provinceArray,a,d,e)}function z(){f.getActivityType().success(function(a){if(200!=a.ret)return window.showAutoDialog(a.msg),!1;var b=a.data;2e4==b.code&&(A.activityTypeArray=b.cate)})}var A=this;A.baseUrl=b.baseUrl,A.imgUrl=b.baseUrl+"img",d.userInfo={user_name:"",id:"",nickname:"",identify_bs_name:"",identity_conditions:""},$.cookie("yiqi_userInfo")&&"null"!=$.cookie("yiqi_userInfo").toString()&&(d.userInfo=JSON.parse($.cookie("yiqi_userInfo").toString())),A.domArray=["mask_div","auto_dialog","alert_dialog","loading_panel"],A.mask_div=!1,A.auto_dialog=!1,A.alert_dialog=!1,A.loading_panel=!1,A.alert_tip=!1,A.alert_text="操作完成",A.provinceArray=[],A.cityArray=[],A.selectProvince="",A.showSearch=!1,A.searchType="活动",A.userExit=w,A.triggerClick=u,A.showAutoDialog=o,A.autoDialogConfirm=p,window.showAutoDialog=A.showAutoDialog,A.showAlertDialog=q,A.alertDialogConfirm=r,A.alertDialogCancel=s,A.alert_tip_timeout=null,A.showAlertTip=t,window.showAlertTip=A.showAlertTip,A.hideAll=n,A.showSearchType=i,A.hideSearchType=j,A.setSearchType=k,A.goToSearch=l,A.keycode13=m,A.getSmsEmailCode=v,A.setProvince=x,A.getCityList=y,A.getActivityType=z,function(){g.getProvinceList(function(a){A.provinceArray=a,A.selectProvince=a[0],h.jsonp("https://api.map.baidu.com/location/ip?ak=f9vN5ry16uR26GXGGfgbcTELUqG1kmhX&coor=bd09ll&callback=JSON_CALLBACK").success(function(b){if(b){for(var c=b.content.address_detail.province.substring(0,b.content.address_detail.province.length-1),d=0;d<a.length;d++)if(c==a[d].name){A.selectProvince=a[d];break}A.getCityList(A.selectProvince.name,"cityArray",null)}})}),A.getActivityType()}(),c.$on("public.show",function(a,b){if(b)for(var c=0;c<b.length;c++)A[b[c]]=!0}),c.$on("public.hide",function(a,b){b=b.length>0?b:A.domArray;for(var c=0;c<b.length;c++)A[b[c]]=!1}),c.$on("public.showAlertDialog",function(a,b){A.showAlertDialog(b)})}app.import("/app/Tpl/web/js/directive/countDown.directive.js","countDown.directive"),app.import("/app/Tpl/web/js/directive/repeatDone.directive.js","repeatDone.directive"),app.import("/app/Tpl/web/js/service/service_min/public.service.min.js","public.service"),app.import("/app/Tpl/web/js/service/service_min/address.service.min.js","address.service"),app.controller("publicController",a),a.$inject=["$timeout","appConfig","$scope","$rootScope","$state","publicService","addressService","$http"]}();