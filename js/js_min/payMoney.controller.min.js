/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d){function e(){var b={type:"wechat",order_no:h.orderId,user_id:a.userInfo.id,Project_type:h.Project_type};c.getOrderPayUrl(b).success(function(a){return 200!=a.ret?(window.showAutoDialog(a.msg),!1):2e4!=a.data.code?(window.showAutoDialog(a.data.msg),!1):void(h.wechatUrl="https://eitty.cn/PhalApi/Library/Wechat_Pay/example/qrcode.php?data="+a.data.code_url)}),h.getOrderStatus()}function f(a){h.selectPayType=a}function g(){var e={order_no:b.id,Project_type:h.Project_type};c.getOrderStatus(e).success(function(b){try{if(200!=b.ret)return window.showAutoDialog(b.msg),!1;if(2e4!=b.data.code)return window.showAutoDialog(b.data.msg),!1;"1"==b.data.order_status&&(h.payStatus=!0,h.deal_price=b.data.price)}catch(a){}finally{"1"!=b.data.order_status&&"payMoney"==a.currentRouter&&d(function(){h.getOrderStatus()},5e3)}})}a.title="订单支付";var h=this;h.orderId=b.id,h.price=b.price,h.num=b.num?b.num:1,h.Project_type=b.Project_type||"0",h.selectPayType="wechat",h.wechatUrl="",h.payStatus=!1,h.getOrderPayUrl=e,h.setActive=f,h.getOrderStatus=g,function(){return a.userInfo.id?void(h.jumpUrl=b.url?b.url:"personal.home"):($state.go("login"),!1)}()}app.import("/app/Tpl/web/js/service/service_min/pay.service.min.js","pay.service"),app.addController("payMoneyController",a),a.$inject=["$rootScope","$stateParams","payService","$timeout"]}();