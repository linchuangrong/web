/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d,e,f){function g(){var c={pageSize:m.pageParams.pageSize,current:m.pageParams.current,user_id:a.userInfo.id,type:"0"};b.getExamineList(c).success(function(a){return 200!=a.ret?(window.showAutoDialog(a.msg),!1):void(2e4==a.data.code?(m.reviewArray=a.data.list,m.pageParams.page_count=a.data.page_count,m.loaded=!0):window.showAutoDialog(a.data.msg))})}function h(){if(window.clipboardData)angular.element(".copy-button").bind("click",function(a){var b=angular.element(this).attr("data-clipboard-text");window.clipboardData.setData("Text",b),window.showAlertTip("复制完成")});else{var a=new ZeroClipboard(document.getElementsByClassName("copy-button"));a.on("ready",function(b){a.on("aftercopy",function(a){window.showAlertTip("复制成功")})})}}function i(){return function(a){parseInt(a)>0&&parseInt(a)<=m.pageParams.page_count?(m.pageParams.current=parseInt(a),m.getReviewList(),angular.element(c).scrollTop(0)):console.log("输入非法")}}function j(b){if(!m.flag.openFlag)return!1;var c={user_id:a.userInfo.id,review_sn:b};a.$broadcast("public.show",["loading_panel"]),m.flag.openFlag=!1,e.open(c).success(function(b){try{if(200!=b.ret)return window.showAutoDialog(b.msg),!1;2e4==b.data.code?d.reload():window.showAutoDialog(b.data.msg)}catch(a){}finally{m.flag.openFlag=!0,a.$broadcast("public.hide",["loading_panel"])}})}function k(b){m.select_review_sn=b;var c={alertDialogTitle:"确定结束评分吗？",alertDialogConfirm:m.closeDialogConfirm,alertDialogCancel:null,alertDialogCancelButton:!0};a.$broadcast("public.showAlertDialog",c)}function l(){if(!m.flag.closeFlag)return!1;a.$broadcast("public.hide",[]);var b={user_id:a.userInfo.id,review_sn:m.select_review_sn};a.$broadcast("public.show",["loading_panel"]),m.flag.closeFlag=!1,e.close(b).success(function(b){try{if(200!=b.ret)return window.showAutoDialog(b.msg),!1;2e4==b.data.code?d.reload():window.showAutoDialog(b.data.msg)}catch(a){}finally{m.flag.openFlag=!0,a.$broadcast("public.hide",["loading_panel"])}})}a.title="我的评审";var m=this;m.baseUrl=f.host(),m.pageParams={showPage:5,pageSize:10,current:1,page_count:22,pageChange:i},m.reviewArray=[],m.flag={openFlag:!0,closeFlag:!0},m.getReviewList=g,m.setCopy=h,m.open=j,m.closeDialog=k,m.closeDialogConfirm=l,function(){m.getReviewList()}()}app.import("/app/Tpl/web/js/directive/pagebar.directive.js","pagebar.directive"),app.import("/app/Tpl/web/js/service/service_min/examine.service.min.js","examine.service"),app.import("/app/Tpl/web/js/directive/repeatDone.directive.js","repeatDone.directive"),app.addController("myReviewController",a),a.$inject=["$rootScope","personalService","$window","$state","examineService","$location"]}();