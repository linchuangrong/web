/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d,e,f){function g(){var b={user_id:a.userInfo.id,review_id:d.review_id};c.getReviewScoreAverage(b).success(function(a){return 200!=a.ret?(window.showAutoDialog(a.msg),!1):void(2e4==a.data.code?(j.finalScoreArray=a.data.average_points,j.maxScore=Math.max.apply(null,j.finalScoreArray),j.getProjectArray()):window.showAutoDialog(a.data.msg))})}function h(){var b={user_id:a.userInfo.id,review_id:d.review_id};c.getProjectArray(b).success(function(a){if(200!=a.ret)return window.showAutoDialog(a.msg),!1;if(2e4==a.data.code){if(j.projectArray=a.data.list,j.project_id=a.data.list[0].id,"1"!=j.projectArray[j.projectArray.length-1].status)return window.showAutoDialog("未评完所有项目（题目），不可查看评分结果"),e.go("index"),!1;j.getProjectScore()}else"40003"==a.data.code?(window.showAutoDialog(a.data.msg),e.go("index")):window.showAutoDialog(a.data.msg)})}function i(){var b={user_id:a.userInfo.id,project_id:j.project_id};a.$broadcast("public.show",["loading_panel"]),c.getProjectScore(b).success(function(b){try{if(200!=b.ret)return window.showAutoDialog(b.msg),!1;2e4==b.data.code?(j.projectDetailArray=b.data.list,j.thisProjectName=b.data.list[0].project_name,j.thisProjectScore=b.data.sum_score,function(){for(var a=0,b=0;b<j.projectDetailArray.length;b++)a+=parseInt(j.projectDetailArray[b].score);j.thisProjectAllScore=a}()):window.showAutoDialog(b.data.msg)}catch(a){}finally{f(function(){a.$broadcast("public.hide",["loading_panel"])},1e3,!0)}})}angular.element(b).scrollTop(0),a.title="评分结果（个人）";var j=this;j.projectArray=[],j.project_id="",j.projectDetailArray=[],j.getReviewScoreAverage=g,j.getProjectArray=h,j.getProjectScore=i,function(){return a.userInfo.id?void j.getReviewScoreAverage():(e.go("login"),!1)}()}app.import("/app/Tpl/web/js/service/service_min/examine.service.min.js","examine.service"),app.addController("finalScoreController",a),a.$inject=["$rootScope","$window","examineService","$stateParams","$state","$timeout"]}();