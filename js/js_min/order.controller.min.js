/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d,e,f){function g(){laydate({elem:"#stop_day",istime:!0,format:"YYYY-MM-DD hh:mm:ss",min:e("toTime")(d.dateNowStamp),isclear:!1,istoday:!1,choose:function(b){a.$apply(function(){i.submitForm.stop_day=b})}})}function h(){if(!i.flag.addOrderFlag)return!1;var d={user_id:a.userInfo.id,title:i.submitForm.title,address:i.submitForm.address,constant:i.submitForm.constant,mobile:i.submitForm.mobile,email:i.submitForm.email,content:i.submitForm.content,price:i.submitForm.price,time:e("toTimeStamp")(i.submitForm.time),type:b.type};a.$broadcast("public.show",["loading_panel"]),i.flag.addOrderFlag=!1,c.getAppointmentAdd(d).success(function(b){try{if(200!=b.ret)return window.showAutoDialog(b.msg),!1;2e4==b.data.code?(window.showAutoDialog(b.data.msg),f.go("examineHome")):window.showAutoDialog(b.data.msg)}catch(a){}finally{a.$broadcast("public.hide",["loading_panel"]),i.flag.addOrderFlag=!0}})}a.title="预约";var i=this;i.submitForm={title:"",address:"",constant:"",mobile:"",email:"",content:"",price:"",time:e("toTime")(d.dateNowStamp)},i.flag={addOrderFlag:!0},i.setStopDay=g,i.addOrder=h,function(){return a.userInfo.id?void("0"==b.type?i.title="预约评审":i.title="预约评估"):(f.go("login"),!1)}()}app.import("/app/Tpl/web/js/service/service_min/public.service.min.js","public.service"),app.import("/app/Tpl/web/js/service/service_min/order.service.min.js","order.service"),app.import("/app/Tpl/web/js/directive/limitSize.directive.js","limitSize.directive"),app.import("/app/Tpl/web/js/directive/integer.directive.js","integer.directive"),app.addController("orderController",a),a.$inject=["$rootScope","$stateParams","orderService","publicService","$filter","$state"]}();