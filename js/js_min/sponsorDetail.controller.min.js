/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d,e){function f(){var b={sponsor_id:d.sponsor_id,user_id:a.userInfo.id};c.getUserFocusFlag(b).success(function(a){return 200!=a.ret?(window.showAutoDialog(a.msg),!1):void(2e4==a.data.code?n.focusFlag=1==a.data.status:window.showAutoDialog(a.data.msg))})}function g(b){var d={user_id:a.userInfo.id,sponsor_id:b,username:a.userInfo.user_name};c.getSponsorFocus(d).success(function(a){200!=a.ret?window.showAutoDialog(a.msg):2e4==a.data.code?(window.showAlertTip(a.data.msg),e.reload()):window.showAlertTip(a.data.msg)})}function h(){var a={id:d.sponsor_id};c.getSponsorDetail(a).success(function(a){if(200!=a.ret)window.showAutoDialog(a.msg);else if(2e4==a.data.code){n.sponsorInfo=a.data.info[0],n.active_num=a.data.active_num,n.welfare_num=a.data.welfare_num,window._bd_share_config={common:{bdSnsKey:{tsina:"89d1afaf46168b260f0a8adee885f71d",tqq:"c4ea495e3ee3f424b0118f72de250fb4"},bdSign:"off",bdMini:"2",bdMiniList:!1,bdStyle:"0",bdSize:"24",bdText:n.sponsorInfo.identify_bs_name,bdPic:n.sponsorInfo.image,bdComment:n.sponsorInfo.company_desc},share:{}},window._bd_share_main=null;var b="/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5);$("body").append("<script defer async='true' src='"+b+"'></script>")}else window.showAutoDialog(a.data.msg)})}function i(){var a={sponsor_id:d.sponsor_id,pageSize:n.pageParams1.pageSize,current:n.pageParams1.current,type:"1"};c.getSponsorDetailList(a).success(function(a){200!=a.ret?window.showAutoDialog(a.msg):2e4==a.data.code?(n.activityArray=a.data.list,n.pageParams1.page_count=a.data.page_count):window.showAutoDialog(a.data.msg)})}function j(){return function(a){parseInt(a)>0&&parseInt(a)<=n.pageParams1.page_count?(n.pageParams1.current=parseInt(a),n.getActivityList(),angular.element(b).scrollTop(0)):console.log("输入非法")}}function k(){var a={sponsor_id:d.sponsor_id,pageSize:n.pageParams2.pageSize,current:n.pageParams2.current,type:"3"};c.getSponsorDetailList(a).success(function(a){200!=a.ret?window.showAutoDialog(a.msg):2e4==a.data.code?(n.crowdFundArray=a.data.list,n.pageParams2.page_count=a.data.page_count):window.showAutoDialog(a.data.msg)})}function l(){return function(a){parseInt(a)>0&&parseInt(a)<=n.pageParams2.page_count?(n.pageParams2.current=parseInt(a),n.getCrowdFundList(),angular.element(b).scrollTop(0)):console.log("输入非法")}}function m(a){var b=Date.parse(new Date)/1e3;return b>=a}angular.element(b).scrollTop(0),a.title="主办方详情";var n=this;n.activePanel="activity",n.pageParams1={showPage:5,pageSize:5,current:1,page_count:1,pageChange:j},n.pageParams2={showPage:5,pageSize:5,current:1,page_count:1,pageChange:l},n.sponsorInfo={},n.activityArray=[],n.crowdFundArray=[],n.getUserFocusFlag=f,n.focusSponsor=g,n.getSponsorDetail=h,n.getActivityList=i,n.getCrowdFundList=k,n.setActivityStop=m,function(){n.getUserFocusFlag(),n.getSponsorDetail(),n.getActivityList(),n.getCrowdFundList()}()}app.import("/app/Tpl/web/js/directive/pagebar.directive.js","pagebar.directive"),app.import("/app/Tpl/web/js/service/service_min/sponsor.service.min.js","sponsor.service"),app.addController("sponsorDetailController",a),a.$inject=["$rootScope","$window","sponsorService","$stateParams","$state"]}();