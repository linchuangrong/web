/*! yiqi_web 2016-12-30 */
!function(){"use strict";function a(a,b,c,d){function e(){laydate({elem:"#birthday",istime:!1,format:"YYYY-MM-DD",max:laydate.now(),isclear:!1,istoday:!1,choose:function(b){a.$apply(function(){g.birthday=b})}})}function f(){if(!g.submitForm.nickname)return window.showAlertTip("请输入昵称"),!1;if(!g.submitForm.sex)return window.showAlertTip("请选择性别"),!1;if(!g.birthday)return window.showAlertTip("请选择生日"),!1;var e={username:g.submitForm.user_name,id:g.submitForm.id,nickname:g.submitForm.nickname,sex:g.submitForm.sex,head_image:g.submitForm.head_image,birthday:c("toTimeStamp")(g.birthday)};a.$broadcast("public.show",["loading_panel"]),b.updateUserInfo(e).success(function(b){try{if(200!=b.ret)return window.showAutoDialog(b.msg),!1;(b.data.code=2e4)?(window.showAutoDialog(b.data.msg),d.reload()):window.showAutoDialog(b.data.msg)}catch(a){}finally{a.$broadcast("public.hide",["loading_panel"])}})}a.title="帐户设置-资料设置";var g=this;return 0==a.userInfo.identity_conditions?(d.go("personal.sponsor"),!1):(g.submitForm=angular.extend({},a.userInfo),g.birthday=c("toDate")(g.submitForm.birthday),g.setBirthday=e,void(g.submit=f))}app.import("/app/Tpl/web/js/directive/imgUpload.directive.js","imgUpload.directive"),app.addController("dataSetController",a),a.$inject=["$rootScope","personalService","$filter","$state"]}();